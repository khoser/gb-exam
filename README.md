# Vektorooo

Проект состоит из набора плейбуков, лежащих в корне проекта:

`all.yml` - общий плейбук на весь проект

`firstrun.yml` - первоначальная настройка всех серверов

`sql.yml` - кластер серверов БД

`app.yml` - сервера приложений

`mon.yml` - сервер мониторинга

---

Можно запустить весь проект через плейбук all.yml. Можно запускать отдельные плейбуки.

Установка производится с одного из компьютеров, находящихся в общей сети с серверами. В нашем конкретном случае роль этого компьютера берет на себя сервер мониторинга (`mon.vektorooo.ru`), где уже установлена необходимая версия ansible.
Перед тем, как запустить плейбук в реальности, необходимо установить зависимости:

`ansible-galaxy install -f -r requirements.yml`

Перед боевым прогоном, желательно проверить что будет изменено при помощи ключей -CD. Ключ -b - для того, чтобы выполнить от имени sudoers. Ключи -v, -vv, -vvv и т.д. - для детализации процессов под капотом. Пример команды запуска плейбука app.yml:

`ansible-playbook app.yml -CD`

Ключ -CD может не сохранять промежуточные данные, в связи с чем могут появляться ошибки. Однако если проект для проверки запустить без этого ключа, то данные не затрутся, работоспособность системы не должна пострадать (мы регулярно запускали без ключа).

Алерты настраивались в графане в полуручном режиме. В качестве канала - телеграм-бот.

Проект протестирован на версии `ansible [core 2.11.1]`
